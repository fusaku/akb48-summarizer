# é¡¹ç›®é‡æ„æ€»ç»“

## é‡æ„å®Œæˆ âœ…

ä½ çš„é¡¹ç›®å·²ç»æˆåŠŸä»æ‰å¹³ç»“æ„é‡æ„ä¸ºæ¨¡å—åŒ–æ¶æ„ã€‚

## æ–°é¡¹ç›®ç»“æ„

```
akb48-summarizer/
â”‚
â”œâ”€â”€ config/                      # ğŸ“ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml             # ä¸»é…ç½®
â”‚   â””â”€â”€ vocabulary.txt          # è‡ªå®šä¹‰è¯æ±‡è¡¨
â”‚
â”œâ”€â”€ core/                        # ğŸ¯ æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ transcriber.py          # Whisper è½¬å½•å™¨
â”‚   â”œâ”€â”€ summarizer.py           # æ€»ç»“è§£æå™¨
â”‚   â””â”€â”€ processor.py            # è§†é¢‘å¤„ç†åè°ƒå™¨
â”‚
â”œâ”€â”€ services/                    # ğŸ”Œ å¤–éƒ¨æœåŠ¡é›†æˆ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ gemini.py              # Gemini API å®¢æˆ·ç«¯
â”‚
â”œâ”€â”€ models/                      # ğŸ¤– AI æ¨¡å‹ç®¡ç†
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ manager.py             # æ¨¡å‹ç®¡ç†å™¨
â”‚
â”œâ”€â”€ utils/                       # ğŸ› ï¸ å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ file.py                # æ–‡ä»¶æ“ä½œ
â”‚   â”œâ”€â”€ video.py               # è§†é¢‘å·¥å…·
â”‚   â””â”€â”€ format.py              # æ ¼å¼åŒ–è¾“å‡º
â”‚
â”œâ”€â”€ data/                        # ğŸ“Š æ•°æ®ç®¡ç†ï¼ˆé¢„ç•™ï¼‰
â”‚   â””â”€â”€ (æœªæ¥ï¼šå…ƒæ•°æ®ã€æ•°æ®åº“)
â”‚
â”œâ”€â”€ scripts/                     # ğŸš€ å¯æ‰§è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ main.py                # ä¸»ç¨‹åº
â”‚   â””â”€â”€ watch.py               # ç›‘æ§å®ˆæŠ¤è¿›ç¨‹
â”‚
â”œâ”€â”€ videos/                      # ğŸ“¹ è¾“å…¥ç›®å½•
â”‚   â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ outputs/                     # ğŸ“¤ è¾“å‡ºç›®å½•
â”‚   â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ tests/                       # ğŸ§ª æµ‹è¯•ï¼ˆé¢„ç•™ï¼‰
â”‚
â”œâ”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ USAGE.md                     # ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ MIGRATION.md                 # è¿ç§»æŒ‡å—
â”œâ”€â”€ requirements.txt             # ä¾èµ–æ¸…å•
â””â”€â”€ .gitignore                   # Git å¿½ç•¥è§„åˆ™
```

## ä»£ç é‡æ„è¯¦æƒ…

### 1. é…ç½®æ¨¡å— (`config/`)

**æ–‡ä»¶ï¼š**
- `config.yaml` - ä¸»é…ç½®ï¼ˆè·¯å¾„å·²è°ƒæ•´ï¼‰
- `vocabulary.txt` - è¯æ±‡è¡¨ï¼ˆåŸå°ä¸åŠ¨ï¼‰

**æ”¹è¿›ï¼š**
- è·¯å¾„ç›¸å¯¹åŒ–ï¼Œæ›´çµæ´»
- é…ç½®é›†ä¸­ç®¡ç†
- æ˜“äºç‰ˆæœ¬æ§åˆ¶

### 2. æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ (`core/`)

**`transcriber.py`**
- ä» `transcribe.py` é‡æ„
- èŒè´£ï¼šWhisper è½¬å½•
- æ”¹è¿›ï¼šæ›´æ¸…æ™°çš„ç±»æ¥å£

**`summarizer.py`**ï¼ˆæ–°å¢ï¼‰
- ä» `models.py` æ‹†åˆ†
- èŒè´£ï¼šè§£æå’ŒéªŒè¯æ€»ç»“
- åŠŸèƒ½ï¼šåŒç‰ˆæœ¬åˆ†å‰²ã€æ ¼å¼éªŒè¯

**`processor.py`**ï¼ˆæ–°å¢ï¼‰
- ä» `main.py` æ‹†åˆ†
- èŒè´£ï¼šåè°ƒæ•´ä¸ªå¤„ç†æµç¨‹
- åŠŸèƒ½ï¼šæ¨¡å¼é€‰æ‹©ã€ç»“æœä¿å­˜

### 3. æœåŠ¡å±‚ (`services/`)

**`gemini.py`**
- ä» `models.py` æ‹†åˆ†
- èŒè´£ï¼šGemini API è°ƒç”¨
- åŠŸèƒ½ï¼šæ–‡æœ¬ç”Ÿæˆã€è§†é¢‘åˆ†æ

**æ”¹è¿›ï¼š**
- å•ä¸€èŒè´£
- æ˜“äºæµ‹è¯•
- ä¾¿äºæ·»åŠ å…¶ä»–æœåŠ¡

### 4. æ¨¡å‹ç®¡ç† (`models/`)

**`manager.py`**
- ä» `models.py` ç®€åŒ–
- èŒè´£ï¼šæ¨¡å‹åˆ‡æ¢å’Œé™çº§
- ä¿ç•™ï¼šæç¤ºè¯ç”Ÿæˆã€Ollama è°ƒç”¨

**æ”¹è¿›ï¼š**
- æ›´ä¸“æ³¨äºç®¡ç†é€»è¾‘
- API è°ƒç”¨å§”æ‰˜ç»™æœåŠ¡å±‚

### 5. å·¥å…·å‡½æ•° (`utils/`)

**`file.py`**
- æ–‡ä»¶æ“ä½œ
- é…ç½®åŠ è½½
- æ—¥å¿—ç®¡ç†

**`video.py`**
- è§†é¢‘ä¿¡æ¯æå–
- è§†é¢‘åŠ é€Ÿ
- å·¥å…·æ£€æŸ¥

**`format.py`**
- æ—¶é—´è½´ç”Ÿæˆ
- YouTube è¯„è®ºæ ¼å¼åŒ–
- å¤‡ç”¨ç”Ÿæˆé€»è¾‘

**æ”¹è¿›ï¼š**
- åŠŸèƒ½åˆ†ç±»æ¸…æ™°
- æ˜“äºæŸ¥æ‰¾å’Œé‡ç”¨

### 6. è„šæœ¬å…¥å£ (`scripts/`)

**`main.py`**
- ä¸»ç¨‹åºå…¥å£
- æ‰¹é‡å¤„ç†é€»è¾‘
- ç»Ÿè®¡å’Œæ—¥å¿—

**`watch.py`**
- ç›‘æ§å®ˆæŠ¤è¿›ç¨‹
- æ–‡ä»¶ç›‘å¬
- è‡ªåŠ¨è§¦å‘

**æ”¹è¿›ï¼š**
- è„šæœ¬èŒè´£å•ä¸€
- ä¸šåŠ¡é€»è¾‘åœ¨ core/

## ä»£ç è¡Œæ•°å¯¹æ¯”

### æ—§ç‰ˆæœ¬ï¼ˆæ‰å¹³ï¼‰
```
main.py:         ~200 è¡Œ
models.py:       ~800 è¡Œ
transcribe.py:   ~150 è¡Œ
utils.py:        ~200 è¡Œ
watch_daemon.py: ~200 è¡Œ
----------------------------
æ€»è®¡ï¼š          ~1,550 è¡Œ
```

### æ–°ç‰ˆæœ¬ï¼ˆæ¨¡å—åŒ–ï¼‰
```
æ ¸å¿ƒä¸šåŠ¡ï¼š
  core/transcriber.py:  ~150 è¡Œ
  core/summarizer.py:   ~60 è¡Œ
  core/processor.py:    ~200 è¡Œ

æœåŠ¡å±‚ï¼š
  services/gemini.py:   ~150 è¡Œ

æ¨¡å‹ç®¡ç†ï¼š
  models/manager.py:    ~250 è¡Œ

å·¥å…·å‡½æ•°ï¼š
  utils/file.py:        ~180 è¡Œ
  utils/video.py:       ~120 è¡Œ
  utils/format.py:      ~80 è¡Œ

è„šæœ¬ï¼š
  scripts/main.py:      ~150 è¡Œ
  scripts/watch.py:     ~180 è¡Œ
----------------------------
æ€»è®¡ï¼š                 ~1,520 è¡Œ
```

**æ”¹è¿›ï¼š**
- æ€»è¡Œæ•°ç›¸è¿‘ï¼ˆåŠŸèƒ½å®Œå…¨ä¿ç•™ï¼‰
- å•æ–‡ä»¶å¹³å‡è¡Œæ•°é™ä½ 60%
- æ›´æ˜“äºç†è§£å’Œç»´æŠ¤

## åŠŸèƒ½ä¿æŒ

### âœ… å®Œå…¨ä¿ç•™çš„åŠŸèƒ½

1. **åŒæ¨¡å¼å¤„ç†**
   - è§†é¢‘ç›´ä¼ ï¼ˆGeminiï¼‰
   - Whisper è½¬å½• + AI æ€»ç»“

2. **æ¨¡å‹è‡ªåŠ¨é™çº§**
   - Gemini 3/2.5/Lite
   - Ollama æœ¬åœ°å¤‡ä»½

3. **è§†é¢‘ä¼˜åŒ–**
   - 2x åŠ é€Ÿ
   - åˆ†è¾¨ç‡è°ƒæ•´

4. **æ‰¹é‡å¤„ç†**
   - è‡ªåŠ¨æ‰«æ
   - è·³è¿‡å·²å¤„ç†
   - é”™è¯¯å¤„ç†

5. **ç›‘æ§æ¨¡å¼**
   - å®æ—¶ç›‘å¬
   - è‡ªåŠ¨è§¦å‘

6. **è¾“å‡ºæ ¼å¼**
   - TXT æ ¼å¼
   - JSON æ ¼å¼
   - åŒç‰ˆæœ¬æ€»ç»“

### ğŸ†• æ–°å¢ç‰¹æ€§

1. **æ›´å¥½çš„æ¨¡å—åŒ–**
   - æ¸…æ™°çš„èŒè´£åˆ†ç¦»
   - æ˜“äºæ‰©å±•

2. **ç±»å‹æç¤º**
   - æ›´å¥½çš„ IDE æ”¯æŒ
   - å‡å°‘ç±»å‹é”™è¯¯

3. **æ–‡æ¡£å®Œå–„**
   - README
   - USAGE
   - MIGRATION

4. **é¡¹ç›®ç®¡ç†**
   - .gitignore
   - requirements.txt
   - æ ‡å‡†ç»“æ„

## æ‰©å±•æ€§

### å®¹æ˜“æ·»åŠ çš„æ–°åŠŸèƒ½

1. **è§†é¢‘æ—¶é•¿åˆ¤æ–­** â†’ `utils/video.py`
   ```python
   class VideoInfo:
       def should_segment(self, threshold: int) -> bool:
           ...
   ```

2. **YouTube ä¸Šä¼ ** â†’ `services/youtube.py`
   ```python
   class YouTubeUploader:
       def upload(self, video_path: str) -> str:
           ...
   ```

3. **Git è‡ªåŠ¨åŒ–** â†’ `services/git.py`
   ```python
   class GitManager:
       def commit_and_push(self, files: list):
           ...
   ```

4. **Oracle ä¸‹è½½** â†’ `services/oracle.py`
   ```python
   class OracleStorage:
       def download(self, video_id: str):
           ...
   ```

5. **å…ƒæ•°æ®ç®¡ç†** â†’ `data/metadata.py`
   ```python
   class VideoMetadata:
       video_id: str
       duration: float
       ...
   ```

## ä¸‹ä¸€æ­¥å»ºè®®

### ç«‹å³å¯åš

1. âœ… **æµ‹è¯•æ–°ç»“æ„**
   ```bash
   cd scripts
   python3 main.py
   ```

2. âœ… **è¿ç§»æ—§æ•°æ®**
   ```bash
   cp old_project/outputs/processed.json ../outputs/
   ```

3. âœ… **æ›´æ–°è¯æ±‡è¡¨**
   ```bash
   vim config/vocabulary.txt
   ```

### è¿‘æœŸè®¡åˆ’

1. **æ·»åŠ å•å…ƒæµ‹è¯•**
   - æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½
   - ç¡®ä¿ç¨³å®šæ€§

2. **è§†é¢‘æ—¶é•¿åˆ¤æ–­**
   - è‡ªåŠ¨åˆ†æ®µé€»è¾‘
   - è¶…é•¿è§†é¢‘æ”¯æŒ

3. **é”™è¯¯å¤„ç†å¢å¼º**
   - æ›´è¯¦ç»†çš„æ—¥å¿—
   - é‡è¯•æœºåˆ¶

### é•¿æœŸè§„åˆ’

1. **YouTube é›†æˆ**
   - è‡ªåŠ¨ä¸Šä¼ 
   - æè¿°æ›´æ–°

2. **Oracle å­˜å‚¨**
   - è‡ªåŠ¨ä¸‹è½½
   - å…ƒæ•°æ®ç®¡ç†

3. **Git è‡ªåŠ¨åŒ–**
   - è‡ªåŠ¨æäº¤
   - ç‰ˆæœ¬ç®¡ç†

4. **Web ç•Œé¢**ï¼ˆå¯é€‰ï¼‰
   - è¿›åº¦å¯è§†åŒ–
   - é…ç½®ç®¡ç†

## ç»´æŠ¤å»ºè®®

### ä»£ç é£æ ¼

- ä½¿ç”¨ç±»å‹æç¤º
- æ·»åŠ æ–‡æ¡£å­—ç¬¦ä¸²
- ä¿æŒå‡½æ•°ç®€çŸ­ï¼ˆ<50 è¡Œï¼‰
- å•ä¸€èŒè´£åŸåˆ™

### ç‰ˆæœ¬æ§åˆ¶

```bash
# åˆå§‹åŒ– Git
git init
git add .
git commit -m "Initial commit: Refactored modular structure"

# åˆ›å»ºå¼€å‘åˆ†æ”¯
git checkout -b develop
```

### ä¾èµ–ç®¡ç†

```bash
# å®šæœŸæ›´æ–°ä¾èµ–
pip3 list --outdated
pip3 install --upgrade package_name
```

## æ€»ç»“

### âœ… é‡æ„æˆåŠŸ

- ä»æ‰å¹³ç»“æ„ â†’ æ¨¡å—åŒ–æ¶æ„
- æ‰€æœ‰åŠŸèƒ½å®Œå…¨ä¿ç•™
- ä»£ç è´¨é‡æ˜¾è‘—æå‡
- æ˜“äºæ‰©å±•å’Œç»´æŠ¤

### ğŸ“Š å…³é”®æŒ‡æ ‡

- æ–‡ä»¶æ•°é‡ï¼š7 â†’ 14ï¼ˆæ›´ç»†åˆ†ï¼‰
- å¹³å‡æ–‡ä»¶å¤§å°ï¼š220 è¡Œ â†’ 110 è¡Œ
- ç›®å½•å±‚çº§ï¼š1 â†’ 3ï¼ˆæ›´æ¸…æ™°ï¼‰
- å¯æ‰©å±•æ€§ï¼šâ­â­ â†’ â­â­â­â­â­

### ğŸ¯ ä¸‹ä¸€æ­¥

é€‰æ‹©ä½ æœ€éœ€è¦çš„åŠŸèƒ½å¼€å§‹å¼€å‘ï¼š
1. è§†é¢‘æ—¶é•¿åˆ¤æ–­å’Œè‡ªåŠ¨åˆ†æ®µ
2. YouTube è‡ªåŠ¨ä¸Šä¼ 
3. Oracle å¯¹è±¡å­˜å‚¨é›†æˆ
4. Git è‡ªåŠ¨åŒ–ç®¡ç†

**éœ€è¦å¸®åŠ©ï¼Ÿéšæ—¶å‘Šè¯‰æˆ‘ä½ æƒ³å…ˆå®ç°å“ªä¸ªåŠŸèƒ½ï¼**
